# **반정규화(Denormalization)란?**
반정규화(Denormalization)는 **정규화(Normalization)된 데이터베이스의 구조를 일부러 깨뜨려** **데이터 중복을 허용함으로써 성능을 개선하는 과정**입니다. 즉, **조인(Join) 연산을 줄여 데이터 조회 성능을 향상시키는 것이 목표**입니다.

---

## **1. 반정규화의 필요성**
정규화를 통해 데이터 중복을 최소화하면 **데이터 무결성**이 유지되지만, **조인이 많아지면 조회 성능이 저하**될 수 있습니다.  
따라서, **조회 성능을 높이기 위해 반정규화를 적용**하는 경우가 있습니다.

**📌 반정규화가 필요한 경우**
- 복잡한 **조인(Join) 연산**이 많아 성능이 저하될 때
- **조회(Query) 속도가 중요**한 경우 (예: 실시간 데이터 처리)
- 데이터 수정보다는 **읽기(Read) 작업이 많은 경우**
- 정규화를 지나치게 수행하여 테이블이 **너무 많이 분리**된 경우

---

## **2. 반정규화 기법**
### **1) 중복 컬럼 추가**
- **정규화된 상태**  
  | 주문번호 (PK) | 고객번호 (FK) |
  |-------------|-------------|
  | 1001        | 2001        |
  | 1002        | 2002        |

  | 고객번호 (PK) | 고객명 |
  |-------------|------|
  | 2001        | 김철수 |
  | 2002        | 이영희 |

- **반정규화 적용 후 (고객명 추가)**
  | 주문번호 (PK) | 고객번호 | 고객명 |
  |-------------|---------|------|
  | 1001        | 2001    | 김철수 |
  | 1002        | 2002    | 이영희 |

  **🛠 적용 이유:**  
  - 주문 테이블에서 고객명을 조회할 때 **조인 없이 빠르게 검색 가능**  
  - 단, 고객명 변경 시 **중복 데이터도 함께 수정해야 하는 문제** 발생

---

### **2) 중복 테이블 추가**
- **정규화된 상태**  
  | 상품번호 (PK) | 상품명 |
  |-------------|------|
  | P001        | 노트북 |
  | P002        | 마우스 |

  | 주문번호 (PK) | 상품번호 (FK) |
  |-------------|-------------|
  | 1001        | P001        |
  | 1002        | P002        |

- **반정규화 적용 후 (상품명 포함한 중복 테이블 생성)**
  | 주문번호 (PK) | 상품번호 | 상품명 |
  |-------------|---------|------|
  | 1001        | P001    | 노트북 |
  | 1002        | P002    | 마우스 |

  **🛠 적용 이유:**  
  - 주문 내역 조회 시 **조인을 줄여 성능 향상**
  - 상품명이 변경될 경우 **주문 테이블에도 반영해야 하는 문제** 발생

---

### **3) 계산된 컬럼 추가**
- **정규화된 상태**  
  | 주문번호 (PK) | 상품번호 | 수량 | 단가 |
  |-------------|------|----|----|
  | 1001        | P001 | 2  | 5000 |
  | 1002        | P002 | 1  | 3000 |

  - 주문 금액을 계산하려면 `수량 × 단가` 계산 필요

- **반정규화 적용 후 (주문금액 컬럼 추가)**
  | 주문번호 (PK) | 상품번호 | 수량 | 단가 | 주문금액 |
  |-------------|------|----|----|------|
  | 1001        | P001 | 2  | 5000 | 10000 |
  | 1002        | P002 | 1  | 3000 | 3000 |

  **🛠 적용 이유:**  
  - 조회 시 매번 `수량 × 단가` 계산할 필요 없이 **빠르게 조회 가능**
  - 단, **단가 변경 시 주문금액도 업데이트해야 하는 문제** 발생

---

## **3. 반정규화의 장단점**
### ✅ **장점**
1. **조회 속도 향상** → 조인(Join) 연산 감소  
2. **복잡한 쿼리 단순화** → 개발 생산성 향상  
3. **읽기(Read) 작업이 많은 경우 효율적**  

### ❌ **단점**
1. **데이터 중복 발생** → 저장공간 증가  
2. **데이터 일관성 문제** → 수정(Update) 작업 어려움  
3. **쓰기(Write) 작업 비용 증가** → 데이터 수정 시 여러 곳을 함께 변경해야 함  

---

## **4. 반정규화 적용 시 고려할 점**
1. **데이터 무결성보다 성능이 더 중요한 경우**에 적용  
2. **조회(SELECT) 빈도가 높은 테이블에 적용**  
3. **데이터 수정(INSERT, UPDATE, DELETE)보다 읽기(READ)가 많을 때 효과적**  
4. 반정규화를 적용하면 **데이터 정합성을 유지하는 추가적인 방법 필요**  
   - 트리거(Trigger), 배치 프로세스, 어플리케이션 로직 등을 활용  

---

## **📌 결론**
- **정규화**는 **데이터 중복을 최소화**하고 **데이터 무결성을 유지**하는 것이 목적  
- **반정규화**는 **성능 향상**을 위해 **데이터 중복을 일부 허용**하는 방법  
- **조회 성능이 중요한 경우 반정규화를 고려**, 하지만 무분별한 적용은 피해야 함  
- **데이터 수정 빈도, 조회 성능 요구사항을 분석한 후 신중하게 적용**해야 함  
