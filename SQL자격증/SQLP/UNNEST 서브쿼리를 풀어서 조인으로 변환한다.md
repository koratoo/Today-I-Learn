
## ✅ `/*+ UNNEST */` 힌트란?

오라클에서 `UNNEST` 힌트는 옵티마이저에게 **서브쿼리를 펼쳐서(unnest) 조인 형태로 변환하라**는 요청입니다.

### 👉 목적:

* **성능 향상**을 위해
* **IN**, **EXISTS**, **스칼라 서브쿼리** 등을
* 옵티마이저가 **조인으로 바꾸게 유도**

---

## 📌 예제

```sql
SELECT /*+ UNNEST */ *
FROM emp e
WHERE e.deptno IN (SELECT d.deptno FROM dept d);
```

위 쿼리에서 `UNNEST` 힌트는 옵티마이저에게:

> "IN 서브쿼리를 **반드시** 조인으로 변환해서 실행해라"

라는 의미입니다.

결과적으로 옵티마이저는 다음과 같은 **JOIN 형태**로 rewrite 합니다:

```sql
SELECT *
FROM emp e
JOIN dept d ON e.deptno = d.deptno;
```

---

## ⚠️ 주의사항

* 오라클은 기본적으로 **가능하면 unnest를 자동으로 수행**하지만,
  일부 경우에는 안전을 위해 하지 않을 수도 있습니다.
* `UNNEST` 힌트를 쓰면 **강제로** 이를 수행하게 만듭니다.
* 하지만 모든 서브쿼리가 조인으로 변환될 수 있는 것은 아닙니다.
  예: `ROWNUM`, `SYSDATE`, `ROWID` 등 사용 시에는 제한이 있음

---

## 🔄 요약

| 용어                 | 의미                         | 관련         |
| ------------------ | -------------------------- | ---------- |
| `UNNEST()` 함수      | 배열 → 행으로 펼침                | ❌ 서브쿼리와 무관 |
| `/*+ UNNEST */` 힌트 | 서브쿼리 → 조인으로 변환하라는 옵티마이저 지시 | ✅ 맞는 표현    |

---

정리하면,

> ✅ **옵티마이저 힌트로서의 `UNNEST`는 서브쿼리를 조인으로 변환시킨다**
> → 당신의 표현은 정확합니다.

