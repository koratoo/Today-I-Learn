
### 🔁 NL 조인 (Nested Loop Join)

#### 🔹 동작 방식

* 외부 테이블에서 한 건씩 꺼내서,
* 내부 테이블을 조건에 맞게 반복 조회하며 매칭을 찾는 방식.

#### 🔹 예시

```sql
FOR record IN outer_table LOOP
  SELECT * FROM inner_table WHERE key = record.key;
END LOOP;
```

#### 🔹 특징

* **소량의 데이터**나 **인덱스가 잘 걸린 내부 테이블**에 유리.
* 내부 테이블에 인덱스가 있다면 빠름.
* **=, >, <, BETWEEN** 등 다양한 조건에서 사용 가능.
* 내부 테이블을 반복해서 조회하므로, **대량 데이터에는 비효율적**.

#### 🔹 사용 예시

* `a.empno = b.empno` (단, `b.empno`에 인덱스가 있을 경우)

---

### 🔁 소트 머지 조인 (Sort-Merge Join)

#### 🔹 동작 방식

1. 두 테이블을 **조인 키로 정렬**.
2. 정렬된 두 집합을 병합하면서 매칭되는 행을 찾아냄.

#### 🔹 특징

* **대용량 데이터**에서 효율적.
* **인덱스 없이도 정렬 후 병합**이 가능.
* 조인 조건은 **=** 이어야 함.
* **정렬 비용이 존재**하지만, 정렬 후에는 **한 번만 스캔**하면 됨.

#### 🔹 사용 예시

* `SELECT * FROM A JOIN B ON A.id = B.id` (양쪽 모두 정렬 후 병합)

---

### ✅ NL 조인 vs 소트 머지 조인 요약 비교

| 구분           | NL 조인                     | 소트 머지 조인     |
| ------------ | ------------------------- | ------------ |
| 조인 방식        | 반복 탐색                     | 정렬 후 병합      |
| 성능           | 소량/인덱스 있을 때 유리            | 대용량 데이터에 유리  |
| 조건           | =, >, <, BETWEEN 등 다양한 조건 | = 조건만 가능     |
| 내부 테이블 접근 방식 | 반복해서 읽음                   | 정렬 후 한 번씩 스캔 |

