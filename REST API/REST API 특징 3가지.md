### REST API 설계의 3대 원칙: 일관성, 멱등성, 무상태성

REST API는 웹 애플리케이션과 클라이언트 간의 통신을 효율적으로 설계하는 데 사용됩니다. 이러한 API를 설계할 때, 사용자 경험과 시스템 안정성을 극대화하기 위해 반드시 고려해야 할 세 가지 원칙인 **일관성**, **멱등성**, 그리고 **무상태성**에 대해 알아보겠습니다.

---

### 1. 일관성 (Consistency)

**일관성**은 REST API 설계의 가장 중요한 원칙 중 하나로, 사용자가 API를 예측 가능하게 사용할 수 있도록 명확하고 규칙적인 URL 구조와 동작을 제공하는 것을 의미합니다.

#### **예시:**
- `POST /v1/reserve/1` : 1번 항목을 예약.
- `POST /v1/reserve/2` : 2번 항목을 예약.

위와 같은 일관된 패턴을 사용하면, 클라이언트는 다른 리소스에 대한 API 요청의 동작을 쉽게 유추할 수 있습니다. 이러한 설계는 다음과 같은 이점을 제공합니다:
- 개발자의 학습 곡선을 줄임
- 유지보수성을 향상
- 오류 발생 가능성을 최소화

#### **베스트 프랙티스:**
1. **명확한 URI 네이밍:**
   - `/users`는 사용자 목록을 반환하고, `/users/123`는 특정 사용자를 반환해야 함.
2. **HTTP 메서드와의 일관성:**
   - `GET`은 조회, `POST`는 생성, `PUT`은 수정, `DELETE`는 삭제로 통일.
3. **버전 관리:**
   - URI에 버전을 명시하여 `/v1/resource`와 같은 방식으로 관리.

---

### 2. 멱등성 (Idempotency)

**멱등성**은 동일한 요청을 여러 번 반복하더라도 서버의 상태와 응답이 변하지 않음을 보장하는 특성을 의미합니다. REST API에서는 특정 HTTP 메서드가 멱등성을 유지하도록 설계되어야 합니다.

#### **멱등성을 보장하는 HTTP 메서드:**
- **GET:**
  - 동일한 데이터를 여러 번 조회해도 서버 상태는 변하지 않음.
  - 예: `GET /users/123`은 항상 동일한 사용자 정보를 반환.
- **PUT:**
  - 동일한 데이터를 여러 번 수정 요청해도 결과는 동일.
  - 예: `PUT /users/123`로 특정 데이터를 수정하면, 같은 요청이 반복되더라도 서버는 변하지 않음.
- **DELETE:**
  - 동일한 리소스를 여러 번 삭제 요청하면, 첫 번째 요청 이후 리소스가 없더라도 상태는 유지됨.

#### **중요성:**
- 네트워크 문제로 인해 요청이 중복 전송될 수 있는 환경에서 클라이언트와 서버 간의 안정성을 높임.
- API 사용 시 예측 가능성을 증가시킴.

---

### 3. 무상태성 (Statelessness)

**무상태성**은 REST API의 핵심 원칙으로, 각 요청이 독립적이고 서버가 클라이언트의 이전 요청 상태를 저장하지 않음을 의미합니다. 이를 통해 서버는 요청을 처리할 때 오직 요청 자체에만 의존하게 됩니다.

#### **특징:**
1. 요청은 필요한 모든 정보를 포함해야 함:
   - 인증 정보 (예: 토큰)
   - 리소스 식별자 (예: `/users/123`)
2. 서버는 클라이언트의 상태를 저장하지 않음:
   - 상태 저장은 클라이언트 측(예: 브라우저의 세션 스토리지)에서 관리.

#### **장점:**
- 확장성: 서버가 특정 클라이언트 상태를 저장하지 않으므로, 요청을 처리하는 서버 인스턴스를 쉽게 확장 가능.
- 복잡성 감소: 상태를 저장하지 않으므로 서버의 구현이 단순해짐.
- 오류 처리 용이성: 독립된 요청 처리로 인해 복구와 문제 해결이 간단.

#### **예시:**
- 인증 헤더:
  - `GET /users/123` 요청 시, 요청 헤더에 인증 토큰을 포함 (`Authorization: Bearer <token>`).
  - 서버는 이전 요청의 인증 정보를 기억하지 않으며, 모든 요청마다 인증 정보가 포함되어야 함.

---

### 결론

REST API 설계에서 **일관성**, **멱등성**, **무상태성**을 준수하면 사용자 경험이 향상되고, API의 유지보수성과 확장성을 보장할 수 있습니다. 이를 설계에 적용하면, 예측 가능하고 안정적인 시스템을 구축할 수 있습니다.

#### 한 줄 요약:
- **일관성**: 예측 가능한 설계.
- **멱등성**: 반복 요청에도 동일한 결과.
- **무상태성**: 요청 간 독립성 유지.

이 원칙을 염두에 두고 설계하면 더 나은 API를 제공할 수 있습니다!

