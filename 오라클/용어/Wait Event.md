오라클에서 말하는 **Wait Event**는 쉽게 말해서,  

> **DB가 뭔가를 기다리고 있는 상태**를 의미해.

---

### 🍜 예시로 이해해볼까?

예를 들어 너가 라멘집에 갔어.
- 주문했는데 아직 라멘이 안 나왔어 → **면을 삶는 중(wait event)**  
- 주방에서 재료 준비하느라 시간이 걸려 → **디스크에서 데이터를 읽는 중(wait event)**  
- 계산하려는데 앞사람이 계산 중 → **락(lock) 걸린 상황(wait event)**

이런 식으로, **DB도 어떤 자원을 기다리느라 일 못하고 있는 상태**가 자주 발생해. 이걸 **Wait Event**라고 해.

---

### 🔧 Wait Event는 왜 중요하냐면?

DB가 느려졌을 때, 단순히 "느리다"가 아니라  
> **어디서 기다리고 있는지(WAIT) 보면 문제 원인을 파악할 수 있어.**

예를 들어:
- `db file sequential read` → 디스크에서 인덱스를 읽느라 기다림 (I/O 이슈일 수 있음)
- `enq: TX - row lock contention` → 다른 세션이 락 걸어서 기다리는 중 (락 경합)
- `log file sync` → 커밋할 때 로그 동기화가 느림 (Redo 관련 이슈)

---

### 🛠️ AWR 보고서에서 Wait Event 분석하는 팁

AWR 보고서 보면 이런 항목 있어:
```
Top 5 Timed Events
~~~~~~~~~~~~~~~~~~~~~
Event                           Waits   Time (s)  %Total Call Time  Wait Class
------------------------------ ------  --------  ----------------  -----------
db file sequential read       300,000    3,200          55%         User I/O
```

이걸 보면, 가장 많은 시간이 어디에 소비됐는지 알 수 있어. 즉, **DB가 어디서 기다리느라 느렸는지 파악 가능**함.


---

## ✅ 1. **Non-Idle Wait Events (비유휴 대기 이벤트)**  
> 실제로 **성능에 영향을 주는 중요한 기다림**들

이건 DB가 뭔가 일을 하려다 **자원을 기다리느라 멈춘 상태**야.  
이런 이벤트들이 많으면, **성능 문제의 원인**일 수 있어.

### 예시:
| Event 이름 | 설명 |
|------------|------|
| `db file sequential read` | 디스크에서 인덱스나 특정 블록 읽는 중 |
| `log file sync` | 커밋할 때 Redo 로그 동기화 기다림 |
| `enq: TX - row lock contention` | 다른 트랜잭션과의 락 충돌 대기 |
| `latch: cache buffers chains` | 내부 메모리 락 대기 |

→ **AWR에서 주로 분석하는 대상이 바로 이 비유휴 이벤트야.**

---

## 💤 2. **Idle Wait Events (유휴 대기 이벤트)**  
> DB가 그냥 **놀고 있는 상태**, 즉 **정상적인 휴식**

DB가 **일감이 없어서 쉬고 있는 상태**야.  
이건 성능에 큰 영향을 주지 않아. 보통 **무시해도 되는 이벤트**야.

### 예시:
| Event 이름 | 설명 |
|------------|------|
| `SQL*Net message from client` | 클라이언트가 쿼리를 보내주길 기다리는 중 |
| `rdbms ipc message` | 내부 프로세스 간 메시지 대기 |
| `smon timer`, `pmon timer` | 시스템 모니터 프로세스 대기 |

→ 이런 이벤트는 **DB가 놀고 있을 때 생기는 거라 성능 분석에서는 제외**하는 경우가 많아.

---

### 🔎 정리하자면:

| 구분       | 의미                            | 성능 영향 | 예시 |
|------------|---------------------------------|------------|------|
| **Idle**   | DB가 놀고 있거나 대기 중        | ❌ 없음    | SQL*Net message from client |
| **Non-Idle** | 뭔가 하려다가 자원 기다리는 중 | ✅ 있음    | db file sequential read |

---

AWR 보고서나 SQL 튜닝할 때는 **non-idle wait event만 집중해서 보는 게 핵심**이야.  
