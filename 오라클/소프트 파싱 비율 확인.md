앞에서 소프트 파싱은  
기존에 실행한 SQL 문장의 **실행 계획을 그대로 재사용하는 방식**이라고 말씀드렸죠?  
이번에는 그 **소프트 파싱이 잘 일어나고 있는지 확인하는 방법**과,  
그 비율을 **높이기 위한 튜닝 방법**에 대해 알아보겠습니다.

---

먼저, 소프트 파싱 비율을 확인하는 방법입니다.

오라클에서는 **라이브러리 캐시**라는 영역에  
SQL 문과 실행 계획이 저장되어 있는데요,  
이 캐시가 얼마나 잘 재사용되고 있는지를 통해 소프트 파싱 비율을 추정할 수 있습니다.

다음은 소프트 파싱 비율을 간단히 확인할 수 있는 쿼리입니다:

```sql
SELECT 
  name, 
  value 
FROM 
  v$sysstat 
WHERE 
  name IN ('parse count (total)', 'parse count (hard)');
```

이 쿼리를 실행하면 두 가지 값을 볼 수 있습니다.

- 전체 파싱 횟수: `parse count (total)`  
- 그중 하드 파싱 횟수: `parse count (hard)`

이걸로 소프트 파싱 비율을 계산할 수 있습니다.

예를 들어:

```
소프트 파싱 비율 = (전체 파싱 - 하드 파싱) ÷ 전체 파싱 × 100
```

이 비율이 **90퍼센트 이상이면 좋고**,  
**70퍼센트 이하라면 개선이 필요하다**고 볼 수 있습니다.

---

그럼 이제 **소프트 파싱 비율을 높이는 방법**,  
즉 하드 파싱을 줄이는 **SQL 튜닝 방법**을 알아볼게요.

1. **바인딩 변수 사용하기**  
   → SQL 문 안에 값을 직접 쓰지 말고 `:변수` 형태로 바꾸는 게 핵심입니다.  
   예:  
   `SELECT * FROM emp WHERE empno = :empno`  
   이렇게 하면 동일한 SQL로 인식돼 재사용이 가능합니다.

2. **불필요한 공백이나 대소문자 차이 줄이기**  
   → SQL은 텍스트이기 때문에,  
     `"SELECT * FROM EMP"` 와 `"select * from emp"` 는 서로 다른 문장으로 인식됩니다.  
     포맷을 통일해서 불필요한 하드 파싱을 막아야 합니다.

3. **라이브러리 캐시 히트율 모니터링**  
   → 공유 풀(Shared Pool) 설정이 너무 작으면 실행 계획을 오래 유지하지 못해 하드 파싱이 늘어날 수 있습니다.  
     필요시 `shared_pool_size`를 조정합니다.

---

📌 **요약 정리**:

- `v$sysstat` 뷰를 통해 **소프트 파싱 비율 확인 가능**  
- **바인딩 변수 사용**, **SQL 포맷 통일**, **공유 풀 관리**로  
  하드 파싱을 줄이고 성능을 향상시킬 수 있다
